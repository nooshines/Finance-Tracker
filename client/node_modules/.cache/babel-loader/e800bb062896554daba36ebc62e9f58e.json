{"ast":null,"code":"import _toConsumableArray from\"/Users/nooshin/Desktop/my GA Homework/project unit4/Finance-Tracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/nooshin/Desktop/my GA Homework/project unit4/Finance-Tracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nooshin/Desktop/my GA Homework/project unit4/Finance-Tracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/nooshin/Desktop/my GA Homework/project unit4/Finance-Tracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/nooshin/Desktop/my GA Homework/project unit4/Finance-Tracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  width: 40%;\\n  &.view {\\n    input {\\n      color: black;\\n      overflow: hidden;\\n      text-overflow: ellipsis;\\n    }\\n  }\\n  &.edit {\\n    /* border: 1px solid lightgray; */\\n    background-color: #f5f5f5;\\n    padding: 5px;\\n    border-radius: 5px;\\n    margin-right: 3px;\\n  }\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useContext,useState}from\"react\";import styled from\"styled-components\";import{makeStyles}from\"@material-ui/core/styles\";import Button from\"@material-ui/core/Button\";import{InputBase}from\"@material-ui/core\";import Grid from\"@material-ui/core/Grid\";import{BudgetContext}from\"../context/BudgetContext\";import{delExpense,updateExpense}from\"../api\";var useStyles=makeStyles(function(theme){return{margin:{margin:theme.spacing(1)},extendedIcon:{marginRight:theme.spacing(1)}};});var StyledInputBase=styled(InputBase)(_templateObject());var Expense=function Expense(_ref){var expense=_ref.expense;var classes=useStyles();var _useContext=useContext(BudgetContext),expenses=_useContext.expenses,setExpense=_useContext.setExpense;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openEdit=_useState2[0],setOpenEdit=_useState2[1];var _useState3=useState(expense.title),_useState4=_slicedToArray(_useState3,2),expenseInput=_useState4[0],setExpenseInput=_useState4[1];var _useState5=useState(expense.amount),_useState6=_slicedToArray(_useState5,2),amountInput=_useState6[0],setAmountInput=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),currentId=_useState8[0],setCurrentId=_useState8[1];var deleteExpense=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return delExpense(id);case 2:data=_context.sent;setExpense(expenses.filter(function(expense){return expense.id!==data[0].id;}));case 4:case\"end\":return _context.stop();}}},_callee);}));return function deleteExpense(_x){return _ref2.apply(this,arguments);};}();var editHandler=function editHandler(id){setOpenEdit(true);setCurrentId(id);};var saveHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var newExpense,updateExpenseState,findExpenseIndex;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return updateExpense(currentId,{title:expenseInput,amount:amountInput});case 2:newExpense=_context2.sent;setOpenEdit(false);updateExpenseState=_toConsumableArray(expenses);findExpenseIndex=updateExpenseState.findIndex(function(expense){return expense.id===currentId;});if(findExpenseIndex!==undefined){updateExpenseState[findExpenseIndex]=newExpense.data;setExpense(_toConsumableArray(updateExpenseState));}case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function saveHandler(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,openEdit?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{item:true,container:true,xs:12},/*#__PURE__*/React.createElement(Grid,{item:true,xs:6},/*#__PURE__*/React.createElement(StyledInputBase,{className:\"edit\",onChange:function onChange(e){setExpenseInput(e.target.value);},defaultValue:expense.title},expense.title),/*#__PURE__*/React.createElement(StyledInputBase,{type:\"number\",className:\"edit\",onChange:function onChange(e){setAmountInput(e.target.value);},defaultValue:expense.amount},expense.amount)),/*#__PURE__*/React.createElement(Grid,{item:true,justify:\"flex-end\",xs:6},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",size:\"small\",className:classes.margin,onClick:function onClick(){return saveHandler();}},\"Save\"),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",size:\"small\",className:classes.margin,onClick:function onClick(){return setOpenEdit(false);}},\"Cancel\")))):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{item:true,container:true,s:12},/*#__PURE__*/React.createElement(Grid,{item:true,xs:6},/*#__PURE__*/React.createElement(StyledInputBase,{disabled:true,defaultValue:expense.title,className:\"view\"}),/*#__PURE__*/React.createElement(\"span\",null,\"$\"),/*#__PURE__*/React.createElement(StyledInputBase,{disabled:true,className:\"view\",value:expense.amount})),/*#__PURE__*/React.createElement(Grid,{item:true,justify:\"flex-end\",xs:6},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",size:\"small\",className:classes.margin,onClick:function onClick(){return deleteExpense(expense.id);}},\"Remove\"),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",size:\"small\",className:classes.margin,onClick:function onClick(){return editHandler(expense.id);}},\"Edit\")))));};export default Expense;","map":{"version":3,"sources":["/Users/nooshin/Desktop/my GA Homework/project unit4/Finance-Tracker/client/src/components/Expense.js"],"names":["React","useContext","useState","styled","makeStyles","Button","InputBase","Grid","BudgetContext","delExpense","updateExpense","useStyles","theme","margin","spacing","extendedIcon","marginRight","StyledInputBase","Expense","expense","classes","expenses","setExpense","openEdit","setOpenEdit","title","expenseInput","setExpenseInput","amount","amountInput","setAmountInput","currentId","setCurrentId","deleteExpense","id","data","filter","editHandler","saveHandler","newExpense","updateExpenseState","findExpenseIndex","findIndex","undefined","e","target","value"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport { InputBase } from \"@material-ui/core\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport { BudgetContext } from \"../context/BudgetContext\";\nimport { delExpense, updateExpense } from \"../api\";\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    margin: theme.spacing(1),\n  },\n  extendedIcon: {\n    marginRight: theme.spacing(1),\n  },\n}));\n\nconst StyledInputBase = styled(InputBase)`\n  width: 40%;\n  &.view {\n    input {\n      color: black;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n  &.edit {\n    /* border: 1px solid lightgray; */\n    background-color: #f5f5f5;\n    padding: 5px;\n    border-radius: 5px;\n    margin-right: 3px;\n  }\n`;\n\nconst Expense = ({ expense }) => {\n  const classes = useStyles();\n\n  const { expenses, setExpense } = useContext(BudgetContext);\n  const [openEdit, setOpenEdit] = useState(false);\n  const [expenseInput, setExpenseInput] = useState(expense.title);\n  const [amountInput, setAmountInput] = useState(expense.amount);\n  const [currentId, setCurrentId] = useState(\"\");\n\n  const deleteExpense = async (id) => {\n    const data = await delExpense(id);\n    setExpense(expenses.filter((expense) => expense.id !== data[0].id));\n  };\n\n  const editHandler = (id) => {\n    setOpenEdit(true);\n    setCurrentId(id);\n  };\n\n  const saveHandler = async () => {\n    const newExpense = await updateExpense(currentId, {\n      title: expenseInput,\n      amount: amountInput,\n    });\n    setOpenEdit(false);\n    let updateExpenseState = [...expenses];\n    let findExpenseIndex = updateExpenseState.findIndex((expense) => {\n      return expense.id === currentId;\n    });\n    if (findExpenseIndex !== undefined) {\n      updateExpenseState[findExpenseIndex] = newExpense.data;\n      setExpense([...updateExpenseState]);\n    }\n  };\n\n  return (\n    <>\n      {openEdit ? (\n        <div>\n          <Grid item container xs={12}>\n            <Grid item xs={6}>\n              <StyledInputBase\n                className=\"edit\"\n                onChange={(e) => {\n                  setExpenseInput(e.target.value);\n                }}\n                defaultValue={expense.title}\n              >\n                {expense.title}\n              </StyledInputBase>\n              <StyledInputBase\n                type=\"number\"\n                className=\"edit\"\n                onChange={(e) => {\n                  setAmountInput(e.target.value);\n                }}\n                defaultValue={expense.amount}\n              >\n                {expense.amount}\n              </StyledInputBase>\n            </Grid>\n            <Grid item justify=\"flex-end\" xs={6}>\n              <Button\n                variant=\"contained\"\n                size=\"small\"\n                className={classes.margin}\n                onClick={() => saveHandler()}\n              >\n                Save\n              </Button>\n              <Button\n                variant=\"contained\"\n                size=\"small\"\n                className={classes.margin}\n                onClick={() => setOpenEdit(false)}\n              >\n                Cancel\n              </Button>\n            </Grid>\n          </Grid>\n        </div>\n      ) : (\n        <div>\n          <Grid item container s={12}>\n            <Grid item xs={6}>\n              <StyledInputBase\n                disabled={true}\n                defaultValue={expense.title}\n                className=\"view\"\n              ></StyledInputBase>\n              <span>$</span>\n              <StyledInputBase\n                disabled={true}\n                className=\"view\"\n                value={expense.amount}\n              ></StyledInputBase>\n            </Grid>\n            <Grid item justify=\"flex-end\" xs={6}>\n              <Button\n                variant=\"contained\"\n                size=\"small\"\n                className={classes.margin}\n                onClick={() => deleteExpense(expense.id)}\n              >\n                Remove\n              </Button>\n              <Button\n                variant=\"contained\"\n                size=\"small\"\n                className={classes.margin}\n                onClick={() => editHandler(expense.id)}\n              >\n                Edit\n              </Button>\n            </Grid>\n          </Grid>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Expense;\n"]},"metadata":{},"sourceType":"module"}