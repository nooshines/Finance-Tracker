{"ast":null,"code":"import _toConsumableArray from\"/Users/nooshin/Desktop/my GA Homework/project unit4/Finance-Tracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/nooshin/Desktop/my GA Homework/project unit4/Finance-Tracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nooshin/Desktop/my GA Homework/project unit4/Finance-Tracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/nooshin/Desktop/my GA Homework/project unit4/Finance-Tracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/nooshin/Desktop/my GA Homework/project unit4/Finance-Tracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  width: 40%;\\n  &.view {\\n    input {\\n      overflow: hidden;\\n      text-overflow: ellipsis;\\n      color: black;\\n    }\\n  }\\n  &.edit {\\n    /* border: 1px solid lightgray; */\\n    background-color: #f5f5f5;\\n    padding: 5px;\\n    border-radius: 5px;\\n    margin-right: 3px;\\n  }\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useContext,useState}from\"react\";import styled from\"styled-components\";import{makeStyles}from\"@material-ui/core/styles\";import Button from\"@material-ui/core/Button\";import{InputBase}from\"@material-ui/core\";import Grid from\"@material-ui/core/Grid\";import{BudgetContext}from\"../context/BudgetContext\";import{delIncome,updateIncome}from\"../api\";var useStyles=makeStyles(function(theme){return{margin:{margin:theme.spacing(1)},extendedIcon:{marginRight:theme.spacing(1)}};});var StyledInputBase=styled(InputBase)(_templateObject());var Income=function Income(_ref){var income=_ref.income;var classes=useStyles();var _useContext=useContext(BudgetContext),incomes=_useContext.incomes,setIncome=_useContext.setIncome;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openEdit=_useState2[0],setOpenEdit=_useState2[1];var _useState3=useState(income.title),_useState4=_slicedToArray(_useState3,2),incomeInput=_useState4[0],setIncomeInput=_useState4[1];var _useState5=useState(income.amount),_useState6=_slicedToArray(_useState5,2),amountInput=_useState6[0],setAmountInput=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),currentId=_useState8[0],setCurrentId=_useState8[1];var deleteIncome=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return delIncome(id);case 2:data=_context.sent;setIncome(incomes.filter(function(income){return income.id!==data[0].id;}));case 4:case\"end\":return _context.stop();}}},_callee);}));return function deleteIncome(_x){return _ref2.apply(this,arguments);};}();var editHandler=function editHandler(id){setOpenEdit(true);setCurrentId(id);};var saveHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var newIncome,updateIncomeState,findIncomeIndex;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"id\",currentId);_context2.next=3;return updateIncome(currentId,{title:incomeInput,amount:amountInput});case 3:newIncome=_context2.sent;setOpenEdit(false);updateIncomeState=_toConsumableArray(incomes);findIncomeIndex=updateIncomeState.findIndex(function(income){return income.id===currentId;});console.log(\"finsIndexIncome\",findIncomeIndex);console.log(\"newincome.data\",newIncome.data);console.log(\"updateIncomeState[findIncomeIndex]\",updateIncomeState[findIncomeIndex]);if(findIncomeIndex&&findIncomeIndex!==undefined){updateIncomeState[findIncomeIndex]=newIncome.data;setIncome(_toConsumableArray(updateIncomeState));}case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function saveHandler(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,openEdit?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{item:true,container:true,xs:12},/*#__PURE__*/React.createElement(Grid,{item:true,xs:6},/*#__PURE__*/React.createElement(StyledInputBase,{className:\"edit\",onChange:function onChange(e){setIncomeInput(e.target.value);},defaultValue:income.title},income.title),/*#__PURE__*/React.createElement(StyledInputBase,{className:\"edit\",onChange:function onChange(e){setAmountInput(e.target.value);},defaultValue:income.amount},income.amount)),/*#__PURE__*/React.createElement(Grid,{item:true,justify:\"flex-end\",xs:6},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",size:\"small\",className:classes.margin,onClick:function onClick(){return saveHandler();}},\"Save\"),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",size:\"small\",className:classes.margin,onClick:function onClick(){return setOpenEdit(false);}},\"Cancel\")))):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{item:true,container:true,s:12},/*#__PURE__*/React.createElement(Grid,{item:true,xs:6},/*#__PURE__*/React.createElement(StyledInputBase,{disabled:true,defaultValue:income.title,className:\"view\"}),/*#__PURE__*/React.createElement(\"span\",null,\"$\"),/*#__PURE__*/React.createElement(StyledInputBase,{disabled:true,className:\"view\",value:income.amount})),/*#__PURE__*/React.createElement(Grid,{item:true,justify:\"flex-end\",xs:6},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",size:\"small\",className:classes.margin,onClick:function onClick(){return deleteIncome(income.id);}},\"Remove\"),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",size:\"small\",className:classes.margin,onClick:function onClick(){return editHandler(income.id);}},\"Edit\")))));};export default Income;","map":{"version":3,"sources":["/Users/nooshin/Desktop/my GA Homework/project unit4/Finance-Tracker/client/src/components/Income.js"],"names":["React","useContext","useState","styled","makeStyles","Button","InputBase","Grid","BudgetContext","delIncome","updateIncome","useStyles","theme","margin","spacing","extendedIcon","marginRight","StyledInputBase","Income","income","classes","incomes","setIncome","openEdit","setOpenEdit","title","incomeInput","setIncomeInput","amount","amountInput","setAmountInput","currentId","setCurrentId","deleteIncome","id","data","filter","editHandler","saveHandler","console","log","newIncome","updateIncomeState","findIncomeIndex","findIndex","undefined","e","target","value"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport { InputBase } from \"@material-ui/core\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport { BudgetContext } from \"../context/BudgetContext\";\nimport { delIncome, updateIncome } from \"../api\";\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    margin: theme.spacing(1),\n  },\n  extendedIcon: {\n    marginRight: theme.spacing(1),\n  },\n}));\n\nconst StyledInputBase = styled(InputBase)`\n  width: 40%;\n  &.view {\n    input {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      color: black;\n    }\n  }\n  &.edit {\n    /* border: 1px solid lightgray; */\n    background-color: #f5f5f5;\n    padding: 5px;\n    border-radius: 5px;\n    margin-right: 3px;\n  }\n`;\n\nconst Income = ({ income }) => {\n  const classes = useStyles();\n\n  const { incomes, setIncome } = useContext(BudgetContext);\n  const [openEdit, setOpenEdit] = useState(false);\n  const [incomeInput, setIncomeInput] = useState(income.title);\n  const [amountInput, setAmountInput] = useState(income.amount);\n  const [currentId, setCurrentId] = useState(\"\");\n\n  const deleteIncome = async (id) => {\n    const data = await delIncome(id);\n    setIncome(incomes.filter((income) => income.id !== data[0].id));\n  };\n\n  const editHandler = (id) => {\n    setOpenEdit(true);\n    setCurrentId(id);\n  };\n\n  const saveHandler = async () => {\n    console.log(\"id\", currentId);\n    const newIncome = await updateIncome(currentId, {\n      title: incomeInput,\n      amount: amountInput,\n    });\n    setOpenEdit(false);\n    let updateIncomeState = [...incomes];\n    let findIncomeIndex = updateIncomeState.findIndex((income) => {\n      return income.id === currentId;\n    });\n    console.log(\"finsIndexIncome\", findIncomeIndex);\n    console.log(\"newincome.data\", newIncome.data);\n    console.log(\n      \"updateIncomeState[findIncomeIndex]\",\n      updateIncomeState[findIncomeIndex]\n    );\n    if (findIncomeIndex && findIncomeIndex !== undefined) {\n      updateIncomeState[findIncomeIndex] = newIncome.data;\n      setIncome([...updateIncomeState]);\n    }\n  };\n\n  return (\n    <>\n      {openEdit ? (\n        <div>\n          <Grid item container xs={12}>\n            <Grid item xs={6}>\n              <StyledInputBase\n                className=\"edit\"\n                onChange={(e) => {\n                  setIncomeInput(e.target.value);\n                }}\n                defaultValue={income.title}\n              >\n                {income.title}\n              </StyledInputBase>\n              <StyledInputBase\n                className=\"edit\"\n                onChange={(e) => {\n                  setAmountInput(e.target.value);\n                }}\n                defaultValue={income.amount}\n              >\n                {income.amount}\n              </StyledInputBase>\n            </Grid>\n            <Grid item justify=\"flex-end\" xs={6}>\n              <Button\n                variant=\"contained\"\n                size=\"small\"\n                className={classes.margin}\n                onClick={() => saveHandler()}\n              >\n                Save\n              </Button>\n              <Button\n                variant=\"contained\"\n                size=\"small\"\n                className={classes.margin}\n                onClick={() => setOpenEdit(false)}\n              >\n                Cancel\n              </Button>\n            </Grid>\n          </Grid>\n        </div>\n      ) : (\n        <div>\n          <Grid item container s={12}>\n            <Grid item xs={6}>\n              <StyledInputBase\n                disabled={true}\n                defaultValue={income.title}\n                className=\"view\"\n              ></StyledInputBase>\n              <span>$</span>\n              <StyledInputBase\n                disabled={true}\n                className=\"view\"\n                value={income.amount}\n              ></StyledInputBase>\n            </Grid>\n            <Grid item justify=\"flex-end\" xs={6}>\n              <Button\n                variant=\"contained\"\n                size=\"small\"\n                className={classes.margin}\n                onClick={() => deleteIncome(income.id)}\n              >\n                Remove\n              </Button>\n              <Button\n                variant=\"contained\"\n                size=\"small\"\n                className={classes.margin}\n                onClick={() => editHandler(income.id)}\n              >\n                Edit\n              </Button>\n            </Grid>\n          </Grid>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Income;\n"]},"metadata":{},"sourceType":"module"}